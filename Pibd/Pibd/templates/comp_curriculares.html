<!DOCTYPE html>
<html>
  <head>
    <title>Componentes Curriculares</title>
    {% load static %}
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css"
    />
    <!-- Include Popper.js before Bootstrap's JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'style.css' %}" />
  </head>
  <body>
    {% include 'menu.html' %}
    <div class="content">
      <div class="content">
        <div class="row">
          <div class="col-md-12">
            <h2>Componentes Curriculares</h2>
          </div>
        </div>
        <br />
        <br />
        <form id="agrupamento" method="get" action="{% url 'comp_curriculares' %}">
          <div class="form-group">
            <label for="dropdown">Select an Option:</label>
            <select class="form-control" id="dropdown" name="dropdown">
              <option value="0" {% if selected_value == "0" %}selected{% endif %}>Nenhum</option>
              <option value="1" {% if selected_value == "1" %}selected{% endif %}>Agrupar por idioma</option>
              <option value="2" {% if selected_value == "2" %}selected{% endif %}>Ordenar por carga horária teórica</option>
              <option value="3" {% if selected_value == "3" %}selected{% endif %}>Ordenar por carga horária prática</option>
              <option value="4" {% if selected_value == "4" %}selected{% endif %}>Ordenar por eixo temático</option>
            </select>
          </div>
          <script>
            const form = document.getElementById("agrupamento");
            const dropdown = document.getElementById("dropdown");
    
            dropdown.addEventListener("change", function() {
                form.submit();
            });
        </script>
        </form>
        <table class="table">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Nome</th>
              <th scope="col">Idioma</th>
              <th scope="col">Carga Horária Prática</th>
              <th scope="col">Carga Horária Teórica</th>
              <th scope="col">Obrigatoriedade</th>
              <th scope="col">Eixo Temático</th>
            </tr>
          </thead>
          <tbody>
            {% for item in results %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ item.0 }}</td>
              <td>{{ item.1 }}</td>
              <td>{{ item.2 }}</td>
              <td>{{ item.3 }}</td>
              <td>{{ item.4 }}</td>
              <td>{{ item.5 }}</td>
              <td>{{ item.6 }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>
